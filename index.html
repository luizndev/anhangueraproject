<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="index, follow">
  <meta name="description" content="Encontre sua sala na Faculdade Anhanguera de Teixeira de Freitas. Consulte horários, salas e professores.">
  <meta name="keywords" content="Anhanguera, Teixeira de Freitas, sala, horários, professores, faculdade">
  <meta name="author" content="Luis Eduardo Andrade Da Silva - Técnico de Informática Jr.">
  <link rel="stylesheet" href="styles/styles.css">
  <link rel="shortcut icon" href="images/favicon.svg" type="image/x-icon">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.0/xlsx.full.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
  <title>Faculdade Anhanguera | Encontre sua Sala</title>
</head>
<body>
  <header class="navbar">
    <a href="https://teixeiradefreitasanhanguera-ess.vercel.app/">
      <img src="images/logotipo.svg" alt="Logotipo Anhanguera">
    </a>
  </header>

  <section class="sectionCenter">
    <h1>QUADRO DE HORÁRIOS</h1>
    <h2>FACULDADE ANHANGUERA <br> TEIXEIRA DE FREITAS - BA</h2>
  </section>

  <!-- LOADING -->
  <div id="loading" class="loading">
    <div class="loader"></div>
    <span>Carregando...</span>
  </div>

  <div class="container hidden" id="conteudo">
    <div class="section" id="periodo-section">
      <div class="headeDisplay">
        <h4>Selecione um turno:</h4>
      </div>
      <div class="displayButtons">
        <button class="btn" onclick="selecionarPeriodo('Matutino')">Matutino</button>
        <button class="btn" onclick="selecionarPeriodo('Noturno')">Noturno</button>
        <button class="btn" onclick="selecionarPeriodo('Noturno - EAD')">Noturno - EAD</button>
      </div>
    </div>

    <div class="section hidden" id="dia-section">
      <div class="headeDisplay">
        <h4>Selecione um dia da semana:</h4>
        <button class="buttonReturn" onclick="voltar('periodo')">
          <img src="./images/seta.svg" alt=""> Voltar
        </button>
      </div>
      <div class="displayButtons">
        <button class="btn" onclick="selecionarDia('Segunda')">Segunda-Feira</button>
        <button class="btn" onclick="selecionarDia('Terça')">Terça-Feira</button>
        <button class="btn" onclick="selecionarDia('Quarta')">Quarta-Feira</button>
        <button class="btn" onclick="selecionarDia('Quinta')">Quinta-Feira</button>
        <button class="btn" onclick="selecionarDia('Sexta')">Sexta-Feira</button>
      </div>
    </div>

    <div class="section hidden" id="opcao-section">
      <div class="headeDisplay">
        <h4>Localize sua sala, por:</h4>
        <button class="buttonReturn" onclick="voltar('dia')">
          <img src="./images/seta.svg" alt=""> Voltar
        </button>
      </div>
      <input type="text" id="filtro-input" placeholder="Filtre aqui por Professor(a)/Disciplina" oninput="filtrarLista()">
      <div id="lista-opcoes"></div>
    </div>

    <div class="section hidden" id="lista-section">
      <div class="headeDisplay">
        <h2 id="lista-titulo"></h2>
        <button class="buttonReturn" onclick="voltar('opcao')">
          <img src="./images/seta.svg" alt=""> Voltar
        </button>
      </div>
      <ul id="lista-opcoes-lista"></ul>
    </div>
  </div>

  <footer>
    <a href="#"><img src="images/logotipo.svg" alt="Logotipo"></a>
    <span>© Copyright 2025 Todos os direitos reservados. Feito por 
      <a href="https://luizndev.vercel.app">Luis Eduardo Andrade Da Silva</a>
    </span>
  </footer>

  <script>
    let dados = [];

    function carregarDados() {
      document.getElementById("loading").classList.remove("hidden");

      fetch('URL_DO_SEU_GOOGLE_SHEETS_AQUI')
        .then(response => response.json())
        .then(data => {
          dados = data.data || [];
          console.log("Dados carregados:", dados);

          document.getElementById("loading").classList.add("hidden");
          document.getElementById("conteudo").classList.remove("hidden");
        })
        .catch(error => {
          console.error("Erro ao carregar os dados:", error);
          document.getElementById("loading").innerHTML = "<span>Erro ao carregar os dados.</span>";
        });
    }

    window.onload = carregarDados;

    let periodoSelecionado = '';
    let diaSelecionado = '';

    function selecionarPeriodo(periodo) {
      periodoSelecionado = periodo;
      document.getElementById('periodo-section').classList.add('hidden');
      document.getElementById('dia-section').classList.remove('hidden');
    }

    function selecionarDia(dia) {
      diaSelecionado = dia;
      document.getElementById('dia-section').classList.add('hidden');
      document.getElementById('opcao-section').classList.remove('hidden');
      mostrarCursos();
    }

    function mostrarCursos() {
      const lista = document.getElementById('lista-opcoes');
      lista.innerHTML = '';

      dados.forEach(item => {
        if (item.dia === diaSelecionado && item.curso === periodoSelecionado) {
          const li = document.createElement('li');
          li.textContent = `${item.faculdade} - ${item.professor}`;
          li.onclick = () => alert(`Disciplina: ${item.disciplina}, Sala: ${item.sala}`);
          lista.appendChild(li);
        }
      });
    }

    function voltar(passo) {
      document.getElementById('opcao-section').classList.add('hidden');
      document.getElementById(`${passo}-section`).classList.remove('hidden');
    }

    function filtrarLista() {
      const filtro = document.getElementById('filtro-input').value.toLowerCase();
      const lista = document.getElementById('lista-opcoes').getElementsByTagName('li');

      for (let item of lista) {
        item.style.display = item.textContent.toLowerCase().includes(filtro) ? '' : 'none';
      }
    }
  </script>
</body>
</html>
